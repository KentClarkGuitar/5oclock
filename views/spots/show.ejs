<%- include('../_partials/head') %>

<div class="show-spot-container">
    <div class="show-left-spot-container">
        <img src="<%= spot.image %>">
    </div>

    <div class="show-spot-right-container">
        <h1 id="spot-name"> <%= spot.name %> </h1>
        <hr class="name-divider">
        <h5 class="label-text"> Address: <span style="font-size: 20px"><%= spot.address.address1 %>, <%= spot.address.city %>, <%= spot.address.state %>, <%= spot.address.zip_code %> </span></h5><br>
        <h5 class="label-text"> Telephone: <span style="font-size: 20px"><%= spot.phone %> </span></h5><br>
        <h5 class="label-text"><span style="font-size: 20px"> <%= spot.isOpen ? 'Open now!' : 'Currently closed :('%> </span></h5> <br>
        <h4 class="website-text"> Website: <a href="<%= spot.website %>"> Link to Yelp Page</a></h4><br>
    </div>

</div>

<div class= "show-specials">
    <!-- specials go here -->
    <% spot.specials.forEach(function(special) { %>
        <div id="<%= special.id %>">
            <input type="button" class="secondary-content btn-small red-text" onclick="destroySpecial('<%= special.id %>')" value="X"> 
            Category: <%= special.category %>
            Days: <%= special.when.days %>
            Hours: <%= special.when.hours %>
            Price Range: <%= special.price %>
            Deets: <%= special.content %>
            Posted: <%= special.createdAt.toLocaleString() %>
        </div>
    <% }); %>
</div>
<% if (user) { %> 
    <%- include('../_partials/new-special') %>;
<% }  else { %>
    <h3> Login to Add a Special!</h3>    
<% } %>

<script>
    function destroySpecial(specialId) {
        console.log(specialId);
        fetch({
            url: `/api/specials/${specialId}`,
            method: 'delete'
        }).then(function() {
            document.getElementById(specialId).remove();
        });
    }
    
</script>
<%- include('../_partials/footer') %>
